# PulseBroker - Брокер сообщений NATS на C++

Реализация протокола брокера сообщений NATS на C++ с соблюдением принципов ООП.

## Возможности

- Поддержка протокола NATS:
  - Команды CONNECT, PING, PONG, SUB, PUB, UNSUB
  - Ответы INFO, OK, MSG
- Поддержка множества клиентов с одновременными подключениями
- Обмен сообщениями на основе топиков (издатель/подписчик)
- Потокобезопасная реализация
- Нулевые внешние зависимости (используется только стандартная библиотека C++)


## Запуск сервера

```bash
# Запуск сервера с настройками по умолчанию (0.0.0.0:4222)
.\Debug\pulse_broker.exe

# Указание хоста и порта
.\Debug\pulse_broker.exe --host 127.0.0.1 --port 4223

# Показать справку
.\Debug\pulse_broker.exe --help
```

## Запуск примера

Сначала запустите сервер:

```bash
.\Debug\pulse_broker.exe
```

Затем запустите пример издателя/подписчика:

```bash
.\Debug\publisher_subscriber.exe
```

Пример демонстрирует:
1. Подключение издателя и подписчика к серверу
2. Подписку на топик "greetings"
3. Публикацию трех сообщений
4. Отображение полученных сообщений
5. Отключение от сервера

## Протокол NATS

Эта реализация следует протоколу NATS, как описано в [документации протокола NATS](https://docs.nats.io/reference/reference-protocols/nats-protocol).

### Поддерживаемые команды

- `CONNECT` - Запрос на подключение клиента
- `PUB` - Публикация сообщения в топик
- `SUB` - Подписка на топик
- `UNSUB` - Отписка от топика
- `PING/PONG` - Проверка активности соединения

## Структура проекта

- `include/` - Заголовочные файлы
  - `NATSProtocolParser.h` - Парсер протокола NATS
  - `Client.h` - Обработка подключений клиентов
  - `Subscription.h` - Управление подписками
  - `NATSServer.h` - Основной класс сервера
- `src/` - Файлы реализации
- `test/` - Модульные тесты
- `examples/` - Примеры приложений

## Тестирование

Запуск тестов:

```bash
.\Debug\pulse_broker_tests.exe
```


